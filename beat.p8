pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
// main

// setup stage + player
function _init()
 --last=time()

 p={
  x=59,
  y=59,
  sp=6,
  score=0
 }
 note={
 x,
 y,
 dir
 }
 
 notes={} --notes array
 
 camera(0,0)
 
 track1() --scripted sequence
          --of notes
 
end

// update player hit location
// update note movement
function _update()
 update_player()
 //update_note()
 for n in all(notes) do
  n:update()
 end
end

// draw sprites
function _draw()
 cls()
 map(0,0)
 spr(p.sp,p.x,p.y) --player
 
 spr(7,p.x-6,p.y)
 spr(7,p.x+6,p.y)
 spr(7,p.x,p.y-6)
 spr(7,p.x,p.y+6)
 
 for n in all(notes) do
  n:draw()
 end

end

function draw_note()
 //for i=1,#notes do
 // local mynote=notes[i]
 // spr(sprnum,mynote.x,mynote.y)
 //end
 

 
end

--allows player to hit notes
--that coming from all directions
function update_player()
 if btn(⬆️) then
  
 end
 if btn(⬇️) then
  // hit note downwards
  // update sprite location
 end
 if btn(⬅️) then
  // hit note left
  // update sprite location
 end
 if btn(➡️) then
  // hit note right
  // update sprite location
 end
end




-->8
//function wait(pause)
// last=time()
// while last < time()+pause do
//  --nothing
// end
 
//end


function track1()
 new_note("left")

 new_note("up")
 
 new_note("down")
end

-- move notes towards player
function update_note()

 --move notes
 //for i=#notes,1,-1 do
 // local mynote=notes[i]
 // mynote.x+=mynote.dx
 // mynote.y+=mynote.dy
 //end 
 
 
end

--counter for note's sprite num.
--spawns notes in the order of
--red, green, blue, orange
sprnum = 2

function new_note(dir)

 --this will cycle between
 --sprite numbers 2-5 for
 --direction checking to use
 if sprnum != 6 then
  sprnum+=1
 else
  sprnum=2
 end
 
 //local newnote={}
 
 --direction checking
 if dir == "left" then
  add(notes, {
   x=0,
   y=p.y,
   dx=2,
   dy=0,
   d=dir,
   draw=function(self)
    spr(sprnum,self.x,self.y)
   end,
   update=function(self)
    self.x+=self.dx
    self.y+=self.dy
    if self.x==p.x then
     del(notes,self)
    end
   end
  })
 end
 
 if dir == "right" then
 add(notes, {
  x=p.x+59,
  y=p.y,
  dx=-2,
  dy=0,
  d=dir,
  draw=function(self)
   spr(sprnum,self.x,self.y)
  end,
  update=function(self)
   self.x+=self.dx
   self.y+=self.dy
   if self.x==p.x then
    del(notes,self)
   end
  end
 })
 end
 
 if dir == "up" then
 add(notes, {
  x=p.x,
  y=0,
  dx=0,
  dy=2,
  d=dir,
  draw=function(self)
   spr(sprnum,self.x,self.y)
  end,
  update=function(self)
   self.x+=self.dx
   self.y+=self.dy
   if self.y==p.y then
    del(notes,self)
   end
  end
 })
 end
 
 if dir == "down" then
 add(notes, {
  x=p.x,
  y=p.y+59,
  dx=0,
  dy=-2,
  d=dir,
  draw=function(self)
   spr(sprnum,self.x,self.y)
  end,
  update=function(self)
   self.x+=self.dx
   self.y+=self.dy
   if self.y==p.y then
    del(notes,self)
   end
  end
 })
 end
 
 //add(notes,newnote)
 --spr(sprnum,note.x,note.y)
 
end -- end new_note
__gfx__
00000000066666600000000000033000000000000099990000077000007777000000000000000000444444444444444444444444444444440000000000000000
0000000066000066082222800037b30000cccc000997799000177100070000700000000000000000454444444444444445444444444244440000000000000000
0070070060000006027788200377bb300c7cccc09979999901111110700000070000000000000000444444444644444444444444444444440000000000000000
0007700060066006027888203bbbbbb3c7cccccc9799999977111177700000070000000000000000444444444444444444444444444445550000000000000000
0007700060066006028888203bbbbbb31cccccc19799999977111177700000070000000000000000444444444444444445555554444444440000000000000000
00700700600000060288882003bbbb3001cccc109999999901111110700000070000000000000000444224444444444444444444446444220000000000000000
000000006600006608222280003bb300001cc1000999999000177100070000700000000000000000444444444444444244444444444444440000000000000000
00000000066666600000000000033000000110000099990000077000007777000000000000000000554444444454444444444446444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444644444444444424444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000445544444444444444444444444444450000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444444444444554664440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444454444444555464444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444555544444444444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000644444444444444444422444444444450000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444422244444444454455540000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444644444444444444444454440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444445444444444444444444444244540000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444564444446644444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444446444444445555444444444640000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000442444444444244444444222444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444455554444444445554444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000446644444444442444444454444424440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444444544444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444544444664444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444444442445555554440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444466444444444444444555544444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000224444444444555564444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444455555444444444446444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444444444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444444444444422444444444444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000444555444464444444444555444424440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
008008000800000000b00b000b00000000c00c000c00000000900900090000000000000000000000000000000000000000000000000000000000000000000000
0008080080000000000b0b00b0000000000c0c00c000000000090900900000000000000000000000000000000000000000000000000000000000000000000000
0008080800888000000b0b0b00bbb000000c0c0c00ccc00000090909009990000000000000000000000000000000000000000000000000000000000000000000
08880888088888000bbb0bbb0bbbbb000ccc0ccc0ccccc0009990999099999000000000000000000000000000000000000000000000000000000000000000000
8888888888888800bbbbbbbbbbbbbb00cccccccccccccc0099999999999999000000000000000000000000000000000000000000000000000000000000000000
08888888888888000bbbbbbbbbbbbb000ccccccccccccc0009999999999999000000000000000000000000000000000000000000000000000000000000000000
8888888888888800bbbbbbbbbbbbbb00cccccccccccccc0099999999999999000000000000000000000000000000000000000000000000000000000000000000
08880888088888000bbb0bbb0bbbbb000ccc0ccc0ccccc0009990999099999000000000000000000000000000000000000000000000000000000000000000000
0008080800888000000b0b0b00bbb000000c0c0c00ccc00000090909009990000000000000000000000000000000000000000000000000000000000000000000
0008080080000000000b0b00b0000000000c0c00c000000000090900900000000000000000000000000000000000000000000000000000000000000000000000
008008000800000000b00b000b00000000c00c000c00000000900900090000000000000000000000000000000000000000000000000000000000000000000000
__map__
0a0b0c0d0a0b0c0d0a0b0c0d0a0b0c0d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1c1d1a1b1c1d1a1b1c1d1a1b1c1d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2c2d2a2b2c2d2a2b2c2d2a2b2c2d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3c3d3a3b3c3d3a3b3c3d3a3b3c3d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0b0c0d0a0b0c0d0a0b0c0d0a0b0c0d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1c1d1a1b1c1d1a1b1c1d1a1b1c1d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2c2d2a2b2c2d2a2b2c2d2a2b2c2d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3c3d3a3b3c3d3a3b3c3d3a3b3c3d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0b0c0d0a0b0c0d0a0b0c0d0a0b0c0d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1c1d1a1b1c1d1a1b1c1d1a1b1c1d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2c2d2a2b2c2d2a2b2c2d2a2b2c2d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3c3d3a3b3c3d3a3b3c3d3a3b3c3d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0b0c0d0a0b0c0d0a0b0c0d0a0b0c0d09090909090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1a1b1c1d1a1b1c1d1a1b1c1d1a1b1c1d09090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2a2b2c2d2a2b2c2d2a2b2c2d2a2b2c2d09090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3c3d3a3b3c3d3a3b3c3d3a3b3c3d09090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000009090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
